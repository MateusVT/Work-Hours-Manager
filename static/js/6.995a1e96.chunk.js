(this["webpackJsonpwork-hours-manager"]=this["webpackJsonpwork-hours-manager"]||[]).push([[6],{440:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=440},807:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a(294),o=a(789),c=a(401),i=a(405),l=a(422),u=a(418),s=a(790),f=a(80),m=a(802),d=a(803),p=a(804),y=a(801),g=a(805),E=a(806),h=a(406),b=a.n(h),v=a(0),x=a.n(v),w=a(33),k=a(778),j=a(407);function O(e,t){return j.utc(e,t)}function R(e,t){return j.utc(e,t).local()}function S(){return j.utc(j.now()).local()}var C=x.a.memo((function(){var e=function(){return j.utc(j.now()).local()},t=Object(v.useMemo)((function(){return e().format("dddd, MMMM Do YYYY")}),[e().dayOfYear()]),a=Object(v.useState)(t),r=Object(n.a)(a,2),o=r[0],i=r[1],l=Object(v.useState)(e().format("HH:mm:ss")),u=Object(n.a)(l,2),s=u[0],f=u[1];return Object(v.useEffect)((function(){return i(t)}),[t]),Object(k.a)((function(){return f(e().format("HH:mm:ss"))}),1e3),x.a.createElement(x.a.Fragment,null,x.a.createElement(c.a,{style:{letterSpacing:"0.25rem"},variant:"h3"},s),x.a.createElement(c.a,{style:{fontFamily:"Playfair Display, sans-serif"},variant:"subtitle1"},o))})),D=a(54);var W=v.memo((function(e){var t=Object(D.a)(Object(D.a)({},e),{},{src:e.src,style:Object(D.a)(Object(D.a)({},e.style),{},{width:e.width,height:e.height})});return v.createElement("img",t)})),H=a(51),M=a.n(H),T=a(73),Y=a(34),L=a(64),I=Object(v.createContext)(null),z=function(e){var t=e.children,a=Object(v.useState)([]),r=Object(n.a)(a,2),o=r[0],c=r[1],i=Object(v.useState)([]),l=Object(n.a)(i,2),u=l[0],s=l[1],f=Object(v.useState)(),m=Object(n.a)(f,2),d=m[0],p=m[1],y=Object(v.useState)(),g=Object(n.a)(y,2),E=g[0],h=g[1],k=Object(v.useState)([]),j=Object(n.a)(k,2),O=j[0],R=j[1],C=Object(v.useContext)(w.a).user,D=Object(Y.b)().enqueueSnackbar;function W(e){return H.apply(this,arguments)}function H(){return(H=Object(T.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:L.a.get({path:"/work-records?userId=".concat(C.id,"&date=").concat(t?t.format("YYYY/MM/DD"):S().format("YYYY/MM/DD")),onError:function(e){console.log("error",e),D("Request Error",{variant:"error"})},onSuccess:function(e){c(e),!t&&p(b()(e)),!t&&s(e)}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(T.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:L.a.get({path:"/daily-work-report?userId=".concat(C.id),onError:function(e){console.log("error",e),D("Request Error",{variant:"error"})},onSuccess:function(e){R(e.slice(0,7))}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(T.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:L.a.get({path:"/daily-work-report?userId=".concat(C.id,"&date=").concat(S().format("YYYY/MM/DD")),onError:function(e){console.log("error",e),D("Request Error",{variant:"error"})},onSuccess:function(e){h(e[0])}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(v.useEffect)((function(){W(),function(){F.apply(this,arguments)}(),function(){z.apply(this,arguments)}()}),[]);var P=Object(v.useCallback)(function(){var e=Object(T.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:L.a.post({path:"/work-records",body:{userId:C.id,date:S().format("YYYY/MM/DD"),time:S().format("HH:mm"),activityType:t},onError:function(e){console.log("error",e)},onSuccess:function(e){W(),D(t+" Registered!",{variant:"success"})}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),A=Object(v.useCallback)(function(){var e=Object(T.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),B=x.a.useMemo((function(){return{addWorkRecord:P,workRecords:o,loadWorkRecordsByDate:A,lastWorkRecord:d,todayWorkRecords:u,todayWorkReport:E,weeklyWorkReport:O}}),[o,P,A,d,u,E,O]);return x.a.createElement(I.Provider,{value:B},t)};function F(){var e=Object(v.useContext)(I);if(!e)throw new Error("useWorkRecords() must be used within a WorkRecordsProvider");return e}var P=a(796),A=a(800),B=a(303),q=a(798),N=a(799),V=a(156),_=a(299),J=a(413),U=a.n(J),Z=a(792),G=a(793),K=a(794),Q=a(795),X=a(797),$=a(724),ee=a.n($),te=a(730),ae=a.n(te),ne=a(725),re=a.n(ne),oe=a(727),ce=a.n(oe),ie=a(728),le=a.n(ie),ue=a(729),se=a.n(ue),fe=a(732),me=a.n(fe),de=a(726),pe=a.n(de),ye=a(731),ge=a.n(ye),Ee={Add:x.a.forwardRef((function(e,t){return x.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Check:x.a.forwardRef((function(e,t){return x.a.createElement(ee.a,Object.assign({},e,{ref:t}))})),Clear:x.a.forwardRef((function(e,t){return x.a.createElement(G.a,Object.assign({},e,{ref:t}))})),Delete:x.a.forwardRef((function(e,t){return x.a.createElement(K.a,Object.assign({},e,{ref:t}))})),DetailPanel:x.a.forwardRef((function(e,t){return x.a.createElement(re.a,Object.assign({},e,{ref:t}))})),Edit:x.a.forwardRef((function(e,t){return x.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),Export:x.a.forwardRef((function(e,t){return x.a.createElement(pe.a,Object.assign({},e,{ref:t}))})),Filter:x.a.forwardRef((function(e,t){return x.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),FirstPage:x.a.forwardRef((function(e,t){return x.a.createElement(le.a,Object.assign({},e,{ref:t}))})),LastPage:x.a.forwardRef((function(e,t){return x.a.createElement(se.a,Object.assign({},e,{ref:t}))})),NextPage:x.a.forwardRef((function(e,t){return x.a.createElement(re.a,Object.assign({},e,{ref:t}))})),PreviousPage:x.a.forwardRef((function(e,t){return x.a.createElement(ae.a,Object.assign({},e,{ref:t}))})),ResetSearch:x.a.forwardRef((function(e,t){return x.a.createElement(G.a,Object.assign({},e,{ref:t}))})),Search:x.a.forwardRef((function(e,t){return x.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),SortArrow:x.a.forwardRef((function(e,t){return x.a.createElement(P.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:x.a.forwardRef((function(e,t){return x.a.createElement(me.a,Object.assign({},e,{ref:t}))})),ViewColumn:x.a.forwardRef((function(e,t){return x.a.createElement(X.a,Object.assign({},e,{ref:t}))}))};function he(e){var t=e.title,a=e.pageSize,r=Object(v.useState)(new Date),o=Object(n.a)(r,2),c=o[0],l=o[1],u=F().loadWorkRecordsByDate;function s(e,t){e&&l(e)}function f(){return x.a.createElement("div",{style:{position:"absolute",top:"0",display:"flex",width:"100%",justifyContent:"center"}},x.a.createElement(i.a,{variant:"outlined",style:{border:"none",zIndex:100},onClick:function(){l(new Date(O(c.getTime()).subtract(1,"day").valueOf()))}},x.a.createElement(q.a,null)),x.a.createElement(V.a,{utils:B.default},x.a.createElement(_.a,{maxDate:R(S().valueOf()),format:"yyyy/MM/dd",margin:"normal",style:{marginTop:"8px",color:"black",width:"90px",position:"relative",zIndex:100},id:"date-picker-inline",value:c,onChange:s})),x.a.createElement(i.a,{variant:"outlined",disabled:c.getDate()==S().date(),style:{border:"none",zIndex:100},onClick:function(){l(new Date(O(c.getTime()).add(1,"day").valueOf()))}},x.a.createElement(N.a,null)))}return Object(v.useEffect)((function(){u(R(c.getTime()))}),[c]),x.a.createElement(U.a,{options:{pageSize:a},components:{Toolbar:function(e){return x.a.createElement("div",{style:{display:"block",flexDirection:"row-reverse",justifyContent:"flex-end !important"}},x.a.createElement(f,null),x.a.createElement(J.MTableToolbar,e))}},style:{width:"100%",minHeight:"100%"},title:t,columns:e.columns,data:e.items,icons:Ee})}function be(){var e=F().workRecords,t={fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"bold",borderBottom:"1px solid rgba(224, 224, 224, 0.4)"};var a=[{title:"",cellStyle:{width:"10%"},render:function(e){return function(e){switch(e){case"Arriving":return x.a.createElement(P.a,{style:{color:"#00802b"}});case"Exiting":return x.a.createElement(A.a,{style:{color:"#fb0e0e"}});case"Lunch Started":return x.a.createElement(y.a,{style:{color:"#00802b"}});case"Finished Lunch":return x.a.createElement(y.a,{style:{color:"#fb0e0e"}});default:return x.a.createElement(x.a.Fragment,null)}}(e.activityType)}},{title:"Activity",headerStyle:t,field:"activityType"},{title:"Date",headerStyle:t,field:"date"},{title:"Time",headerStyle:t,field:"time"}];return x.a.createElement(he,{title:"Today's Records",pageSize:8,columns:a,items:e})}var ve=a(733);function xe(e,t,a,n,r,o){return{responsive:!0,maintainAspectRatio:!0,onResize:function(){},aspectRatio:.5,layout:{padding:12},scales:{yAxes:[{ticks:{max:n,min:r}}]},legend:{display:"pizza"==a||"doughnut"==a,labels:{fontSize:16},onClick:function(e,t){return o&&o(t.index)},onHover:function(e){var t=e.target;t&&(t.style.cursor="pointer")},position:t},onClick:function(e,t){if(t&&1==t.length&&o){var a=t[0]._index;o(a)}},onHover:function(e,t){var a=e.target;a&&(a.style.cursor=t[0]?"pointer":"default")},title:{display:!0,fontSize:20,position:"top",text:e},tooltips:{bodyFontSize:14}}}var we=function(e){var t=e.fetchColor,a=e.fetchLegend,n=e.fetchValue,r=e.items,o=e.min,c=e.max,i=e.onItemSelection,l=e.showZeros,u=e.title,s=e.legendPosition,f=e.type,m=Object(v.useMemo)((function(){return r.map((function(e,t){return{key:e,value:n(e,t)}})).filter((function(e){return l||e.value>0}))}),[n,r,l]),d=Object(v.useMemo)((function(){return m.map((function(e,a){return t(e.key,a)}))}),[t,m]),p=Object(v.useMemo)((function(){return m.map((function(e,t){return a(e.key,t)}))}),[a,m]),y={data:{datasets:[{backgroundColor:d,data:Object(v.useMemo)((function(){return m.map((function(e){return e.value})).sort((function(t,a){if(!e.orderBy)return 0;switch(e.orderBy){case"desc":return t<a?1:t>a?-1:0;case"asc":return t<a?-1:t>a?1:0;default:return 0}}))}),[m,e.orderBy])}],labels:p},options:xe(u,s||"bottom",f,o,c,i&&function(e){return i(m[e].key)})};return x.a.createElement(x.a.Fragment,null,"verticalBar"==f&&x.a.createElement(ve.Bar,y),"horizontalBar"==f&&x.a.createElement(ve.HorizontalBar,y),"doughnut"==f&&x.a.createElement(ve.Doughnut,y),"pizza"==f&&x.a.createElement(ve.Pie,y),"line"==f&&x.a.createElement(ve.Line,y))};function ke(){var e,t,a=F().lastWorkRecord,n=Object(v.useContext)(w.a);return x.a.createElement(r.a,{display:"flex",flexDirection:"row",overflow:"hidden"},x.a.createElement(r.a,{overflow:"hidden",p:1},x.a.createElement(W,{src:"imgs/user.svg",width:"100%",height:"100%"})),x.a.createElement(r.a,{p:1,flex:1,style:{display:"flex",marginLeft:"10px"}},x.a.createElement(o.a,{container:!0,alignItems:"center"},x.a.createElement(o.a,{item:!0,xs:12},x.a.createElement(c.a,{variant:"h5",style:{fontWeight:"bold"}},null===(e=n.user)||void 0===e?void 0:e.name),x.a.createElement(c.a,{style:{fontStyle:"italic"},variant:"h6"},null===(t=n.user)||void 0===t?void 0:t.occupation),x.a.createElement(c.a,{variant:"h6"}," ",a&&x.a.createElement("span",null,x.a.createElement("b",null,"Last Status:")," ",a.activityType," at ",a.time))))))}function je(){var e=F(),t=e.todayWorkRecords,a=e.todayWorkReport;return x.a.createElement(o.a,{container:!0,style:{width:"100%",padding:"10px"}},x.a.createElement(o.a,{item:!0,xs:12,lg:4},x.a.createElement(c.a,{variant:"h5",style:{fontWeight:"bold"}},"Started Working"),x.a.createElement("div",{style:{display:"flex",alignItems:"center"}},x.a.createElement(m.a,{style:{marginRight:"5px"}}),x.a.createElement(c.a,{variant:"h6"},t[0]?O(t[0].time,"HH:mm").format("LT"):"--:--"))),x.a.createElement(o.a,{item:!0,xs:12,lg:4},x.a.createElement(c.a,{variant:"h5",style:{fontWeight:"bold"}},"Total Worked Today"),x.a.createElement("div",{style:{display:"flex",alignItems:"center"}},x.a.createElement(d.a,{style:{marginRight:"5px"}}),x.a.createElement(c.a,{variant:"h6"},(null===a||void 0===a?void 0:a.totalHoursWorked)||"00:00"))),x.a.createElement(o.a,{item:!0,xs:12,lg:4},x.a.createElement(c.a,{variant:"h5",style:{fontWeight:"bold"}},"Missing Hours"),x.a.createElement("div",{style:{display:"flex",alignItems:"center"}},x.a.createElement(d.a,{style:{marginRight:"5px"}}),x.a.createElement(c.a,{variant:"h6"},"02:00"))))}function Oe(){var e=F(),t=e.workRecords,a=e.addWorkRecord,o=b()(t||[]),c=Object(v.useState)(),l=Object(n.a)(c,2)[1],u=x.a.useCallback((function(){return l({})}),[]);return x.a.createElement(r.a,{display:"flex",flexDirection:"row",flex:2,justifyContent:"center",alignItems:"flex-end",padding:2},x.a.createElement(i.a,{variant:"contained",disabled:o&&"Lunch Started"===o.activityType,style:{backgroundColor:"#00802b",fontWeight:"bold",width:"170px",marginRight:5},title:"Check-In",endIcon:x.a.createElement(p.a,null),onClick:o&&"Arriving"===o.activityType?function(){a("Exiting"),u()}:function(){a("Arriving"),u()}},o&&"Arriving"===o.activityType?"Check-Out":"Check-In"),x.a.createElement(i.a,{style:{width:"170px",backgroundColor:"#fb0e0e",fontWeight:"bold",marginLeft:5},disabled:o&&"Exiting"===o.activityType,variant:"contained",title:"Lunch",endIcon:x.a.createElement(y.a,null),onClick:o&&"Lunch Started"===o.activityType?function(){a("Finished Lunch"),u()}:function(){a("Lunch Started"),u()}},o&&"Lunch Started"===o.activityType?"Stop Lunch":"Start Lunch"))}function Re(e){return x.a.createElement(l.a,{style:{backgroundColor:"#04010e"}},x.a.createElement(u.a,{edge:"start",style:{marginRight:16},color:"inherit","aria-label":"menu"},x.a.createElement(g.a,{style:{color:"white"}})),x.a.createElement(r.a,{component:"div",display:"flex",width:"100%",justifyContent:"space-between"},x.a.createElement(c.a,{variant:"h6",style:{color:"white",width:"200px"}},"Work Hours Manager")),x.a.createElement(u.a,{edge:"end",onClick:function(){e.logout()},style:{marginRight:16},color:"inherit","aria-label":"menu"},x.a.createElement(c.a,{style:{marginRight:"5px",color:"white"}},"Exit"),x.a.createElement(E.a,{style:{color:"white"}})))}function Se(){var e=F().weeklyWorkReport;if(!e)return x.a.createElement(x.a.Fragment,null);var t=["#e7ff7b","#0088d9","#bff47f","#f74a4a","#bcfa9e","#496956","#ffc3ba"];return x.a.createElement(we,{min:0,max:9,fetchColor:function(a){return t[e.indexOf(a)]},fetchLegend:function(e){return O(e.date).format("ddd")},fetchValue:function(e){return O(e.totalHoursWorked,"HH:mm").hours()+O(e.totalHoursWorked,"HH:mm").minutes()/60},items:e,title:"Weekly Worked Hours",legendPosition:"bottom",type:"verticalBar"})}t.default=function(e){return x.a.createElement(z,null,x.a.createElement(r.a,{component:"div",bgcolor:"#6c677ba3",style:{width:"100%",minHeight:"100%",display:"flex",flexDirection:"column",flex:1,height:"100%"}},x.a.createElement(s.a,{position:"static"},x.a.createElement(Re,{logout:function(){e.logout()}})),x.a.createElement(o.a,{container:!0,style:{height:"100%"}},x.a.createElement(o.a,{item:!0,xs:12,md:6},x.a.createElement(r.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-around"},x.a.createElement(r.a,{component:f.a,margin:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},x.a.createElement(ke,null)),x.a.createElement(r.a,{component:f.a,margin:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},x.a.createElement(r.a,{textAlign:"center"},x.a.createElement(C,null),x.a.createElement(Oe,null))),x.a.createElement(r.a,{component:f.a,margin:1,display:"flex",flex:1,p:4},x.a.createElement(o.a,{container:!0},x.a.createElement(o.a,{xs:12,item:!0},x.a.createElement(r.a,{display:"flex",height:"100%",justifyContent:"center",flexDirection:"column",alignItems:"center"},x.a.createElement(Se,null))))))),x.a.createElement(o.a,{item:!0,xs:12,md:6},x.a.createElement(r.a,{display:"flex",flexDirection:"column",height:"100%"},x.a.createElement(r.a,{display:"flex",flex:1,component:f.a,margin:1},x.a.createElement(je,null)),x.a.createElement(r.a,{display:"flex",flex:9,p:1,flexDirection:"column",justifyContent:"center",component:f.a,margin:1},x.a.createElement(be,null)))))))}}}]);
//# sourceMappingURL=6.995a1e96.chunk.js.map